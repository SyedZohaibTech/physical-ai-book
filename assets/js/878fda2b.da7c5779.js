"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[8851],{8453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>c});var i=n(6540);const r={},o=i.createContext(r);function t(e){const s=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(o.Provider,{value:s},e.children)}},9710:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"module-1-ros2/nodes-topics-services","title":"2. Nodes, Topics, Services, & Actions","description":"In the last chapter, we introduced the ROS graph as a network of independent programs. Now, let\'s break down the four fundamental concepts that make this graph work: Nodes, Topics, Services, and Actions.","source":"@site/docs/module-1-ros2/2-nodes-topics-services.md","sourceDirName":"module-1-ros2","slug":"/module-1-ros2/nodes-topics-services","permalink":"/physical-ai-book/docs/module-1-ros2/nodes-topics-services","draft":false,"unlisted":false,"editUrl":"https://github.com/physical-ai-book/physical-ai-book/tree/main/docs/module-1-ros2/2-nodes-topics-services.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"2. Nodes, Topics, Services, & Actions","sidebar_label":"Nodes, Topics, Services","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Introduction to ROS 2","permalink":"/physical-ai-book/docs/module-1-ros2/intro-to-ros2"},"next":{"title":"Controlling with rclpy","permalink":"/physical-ai-book/docs/module-1-ros2/rclpy-for-control"}}');var r=n(4848),o=n(8453);const t={title:"2. Nodes, Topics, Services, & Actions",sidebar_label:"Nodes, Topics, Services",sidebar_position:2},c="2. The Building Blocks: Nodes, Topics, Services, and Actions",a={},l=[{value:"1. Nodes: The Processors",id:"1-nodes-the-processors",level:2},{value:"2. Topics: The Broadcast System",id:"2-topics-the-broadcast-system",level:2},{value:"3. Services: The Request/Response System",id:"3-services-the-requestresponse-system",level:2},{value:"4. Actions: The Long-Running Task System",id:"4-actions-the-long-running-task-system",level:2},{value:"Summary: Topics vs. Services vs. Actions",id:"summary-topics-vs-services-vs-actions",level:2}];function d(e){const s={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"2-the-building-blocks-nodes-topics-services-and-actions",children:"2. The Building Blocks: Nodes, Topics, Services, and Actions"})}),"\n",(0,r.jsx)(s.p,{children:"In the last chapter, we introduced the ROS graph as a network of independent programs. Now, let's break down the four fundamental concepts that make this graph work: Nodes, Topics, Services, and Actions."}),"\n",(0,r.jsx)(s.h2,{id:"1-nodes-the-processors",children:"1. Nodes: The Processors"}),"\n",(0,r.jsxs)(s.p,{children:["A ",(0,r.jsx)(s.strong,{children:"Node"})," is the smallest unit of computation in ROS. Think of it as a single-purpose executable program. In our humanoid robot, we might have nodes for:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Reading sensor data (",(0,r.jsx)(s.code,{children:"lidar_driver"}),", ",(0,r.jsx)(s.code,{children:"camera_driver"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:["Controlling motors (",(0,r.jsx)(s.code,{children:"arm_controller"}),", ",(0,r.jsx)(s.code,{children:"base_controller"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:["Planning (",(0,r.jsx)(s.code,{children:"path_planner"}),", ",(0,r.jsx)(s.code,{children:"grasp_planner"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:["Processing data (",(0,r.jsx)(s.code,{children:"perception"}),", ",(0,r.jsx)(s.code,{children:"localization"}),")"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Each node is responsible for a tiny piece of the robot's overall functionality. You can write nodes in Python (",(0,r.jsx)(s.code,{children:"rclpy"}),") or C++ (",(0,r.jsx)(s.code,{children:"rclcpp"}),"). We will be using Python for this textbook."]}),"\n",(0,r.jsxs)(s.p,{children:["To run a node, you use the ",(0,r.jsx)(s.code,{children:"ros2 run"})," command:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Syntax: ros2 run <package_name> <executable_name>\nros2 run my_robot_package talker_node\n"})}),"\n",(0,r.jsx)(s.h2,{id:"2-topics-the-broadcast-system",children:"2. Topics: The Broadcast System"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Topics"})," are the primary way nodes communicate. They are named buses over which nodes can send and receive data. Topics use a ",(0,r.jsx)(s.strong,{children:"publish/subscribe"})," model."]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Publisher"}),": A node that sends messages to a topic. For example, a ",(0,r.jsx)(s.code,{children:"camera_driver"})," node publishes image data to an ",(0,r.jsx)(s.code,{children:"/image_raw"})," topic."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Subscriber"}),": A node that receives messages from a topic. A ",(0,r.jsx)(s.code,{children:"perception"})," node might subscribe to the ",(0,r.jsx)(s.code,{children:"/image_raw"})," topic to get images for processing."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Any number of publishers can send data to a topic, and any number of subscribers can listen. This creates a one-to-many or many-to-many broadcasting system. It's decoupled\u2014the publisher doesn't know or care who is listening."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-mermaid",children:"graph TD\n    subgraph ROS Graph\n        Publisher_Node -- Publishes Message --\x3e Topic_Bus;\n        Topic_Bus -- Message Broadcast --\x3e Subscriber_Node_1;\n        Topic_Bus -- Message Broadcast --\x3e Subscriber_Node_2;\n        Topic_Bus -- Message Broadcast --\x3e Subscriber_Node_3;\n    end\n\n    A[Node A: Publisher] --\x3e T((/chatter));\n    T --\x3e B[Node B: Subscriber];\n    T --\x3e C[Node C: Subscriber];\n"})}),"\n",(0,r.jsxs)(s.p,{children:["The data sent over a topic is called a ",(0,r.jsx)(s.strong,{children:"message"}),". Each topic has a specific ",(0,r.jsx)(s.strong,{children:"message type"})," (e.g., ",(0,r.jsx)(s.code,{children:"String"}),", ",(0,r.jsx)(s.code,{children:"Int32"}),", ",(0,r.jsx)(s.code,{children:"PoseStamped"}),")."]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Key Command-Line Tools for Topics:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ros2 topic list"}),": See all active topics."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ros2 topic echo /topic_name"}),": Print the data being published on a topic."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ros2 topic pub /topic_name <message_type> '<data>'"}),": Publish a single message from the command line."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"3-services-the-requestresponse-system",children:"3. Services: The Request/Response System"}),"\n",(0,r.jsxs)(s.p,{children:["While topics are great for continuous data streams, sometimes you need a direct request/response interaction. This is what ",(0,r.jsx)(s.strong,{children:"Services"})," are for."]}),"\n",(0,r.jsxs)(s.p,{children:["A service has two parts: a ",(0,r.jsx)(s.strong,{children:"request"})," and a ",(0,r.jsx)(s.strong,{children:"response"}),". One node acts as a ",(0,r.jsx)(s.strong,{children:"service server"}),", offering a specific service. Another node acts as a ",(0,r.jsx)(s.strong,{children:"service client"}),", calling that service and waiting for a response."]}),"\n",(0,r.jsx)(s.p,{children:"Unlike topics, services are a one-to-one communication mechanism. The client sends one request and gets back one response."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-mermaid",children:"graph LR\n    subgraph ROS Graph\n        Client_Node -- Request --\x3e Service_Server_Node;\n        Service_Server_Node -- Response --\x3e Client_Node;\n    end\n    \n    A[Node A: Client] -- GetPlanRequest --\x3e B((/get_plan));\n    B -- GetPlanResponse --\x3e A;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"When to use a Service:"}),"\nUse a service when you need to trigger a remote computation that will finish quickly, like:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Querying the status of a device."}),"\n",(0,r.jsx)(s.li,{children:'Requesting a calculation (e.g., "calculate the inverse kinematics for this arm pose").'}),"\n",(0,r.jsx)(s.li,{children:"Spawning a model in a simulation."}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Key Command-Line Tools for Services:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ros2 service list"}),": See all active services."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ros2 service type /service_name"}),": Show the service type."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ros2 service call /service_name <service_type> '<request>'"}),": Call a service from the command line."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"4-actions-the-long-running-task-system",children:"4. Actions: The Long-Running Task System"}),"\n",(0,r.jsx)(s.p,{children:"What if you need to command a task that takes a long time to complete, like navigating to a goal? A service isn't a good fit, because you don't want the client to be stuck waiting for seconds or even minutes."}),"\n",(0,r.jsxs)(s.p,{children:["This is where ",(0,r.jsx)(s.strong,{children:"Actions"})," come in. Actions are designed for long-running, asynchronous tasks that provide feedback while they are executing."]}),"\n",(0,r.jsx)(s.p,{children:"An action has three parts:"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Goal"}),': The client sends a goal to the action server (e.g., "navigate to coordinates X, Y").']}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Feedback"}),': The server provides regular updates on its progress (e.g., "current distance to goal is 5 meters").']}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Result"}),': When the task is finished, the server sends a final result (e.g., "goal reached successfully").']}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"This allows a client to send a goal, monitor its progress, and even cancel it if needed, all without blocking."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-mermaid",children:"graph TD\n    subgraph Action Communication\n        Client -- Goal --\x3e Server;\n        Server -- Feedback --\x3e Client;\n        Server -- Result --\x3e Client;\n    end\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"When to use an Action:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Commanding a robot to move to a specific location."}),"\n",(0,r.jsx)(s.li,{children:"Executing a multi-step manipulation task (e.g., picking up an object)."}),"\n",(0,r.jsx)(s.li,{children:"Performing a long-running calculation like building a map."}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"summary-topics-vs-services-vs-actions",children:"Summary: Topics vs. Services vs. Actions"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Communication Pattern"}),(0,r.jsx)(s.th,{children:"Use Case"}),(0,r.jsx)(s.th,{children:"Example"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Topic"})}),(0,r.jsx)(s.td,{children:"Publish/Subscribe (many-to-many)"}),(0,r.jsx)(s.td,{children:"Continuous data streams"}),(0,r.jsx)(s.td,{children:"Publishing camera images or laser scans."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Service"})}),(0,r.jsx)(s.td,{children:"Request/Response (one-to-one)"}),(0,r.jsx)(s.td,{children:"Quick, remote procedure calls"}),(0,r.jsx)(s.td,{children:"Querying a setting or triggering a fast, blocking task."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Action"})}),(0,r.jsx)(s.td,{children:"Asynchronous Goal/Feedback/Result"}),(0,r.jsx)(s.td,{children:"Long-running, non-blocking tasks"}),(0,r.jsx)(s.td,{children:"Commanding a robot to navigate to a goal 10 meters away."})]})]})]}),"\n",(0,r.jsx)(s.p,{children:"With these four concepts, you can build nearly any robotic application. In the next chapter, we'll write our first ROS 2 Python node and see them in action."})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);